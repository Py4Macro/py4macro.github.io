
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>成長会計 &#8212; Pythonで学ぶマクロ経済学 (中級＋レベル)</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="_static/myadmonitions.css?v=372cf325" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-3FB0WMD39P"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-3FB0WMD39P');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-3FB0WMD39P');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '5b_Growth_Accounting';</script>
    <link rel="canonical" href="https://py4macro.github.io/5b_Growth_Accounting.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="回帰分析" href="6_Regression.html" />
    <link rel="prev" title="発展会計" href="5a_Development_Accounting.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">Pythonで学ぶマクロ経済学 (中級＋レベル)</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Pythonの学習</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://py4basics.github.io">経済学のためのPython入門</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">長期分析</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="5a_Development_Accounting.html">発展会計</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">成長会計</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_Regression.html">回帰分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="7_DifferenceEq.html">差分方程式と経済分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_Solow.html">ソロー・モデル</a></li>
<li class="toctree-l1"><a class="reference internal" href="9_Convergence.html">所得分布と所得収斂</a></li>
<li class="toctree-l1"><a class="reference internal" href="19_PPP.html">一物一価と購買力平価</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">短期分析I</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="10_Data_Fluctuation.html">GDPと構成要素</a></li>
<li class="toctree-l1"><a class="reference internal" href="11_Macro_Variables.html">法則・曲線・増加率</a></li>
<li class="toctree-l1"><a class="reference internal" href="18_ADAS-1.html">定量的マクロ経済分析：Part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="18_ADAS-2.html">定量的マクロ経済分析：Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_IS-MP-PC.html">IS-MP-PCモデル</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">短期分析II</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="13_random_TFP.html">ランダム変数と全要素生産性</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_linearsolve.html"><code class="docutils literal notranslate"><span class="pre">linearsolve</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="15_RBC.html">実物的景気循環(RBC)モデル</a></li>
<li class="toctree-l1"><a class="reference internal" href="16_data_on_money.html">古典派の二分法と金融政策</a></li>
<li class="toctree-l1"><a class="reference internal" href="Plan.html">今後の計画</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">参考</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://py4basics.github.io/Gapminder.html">Gapminder</a></li>
<li class="toctree-l1"><a class="reference external" href="https://py4etrics.github.io">Pythonで学ぶ入門計量経済学</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/Py4Macro/py4macro.github.io/source?urlpath=tree/5b_Growth_Accounting.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/Py4Macro/py4macro.github.io/blob/source/5b_Growth_Accounting.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>



<a href="https://github.com/Py4Macro/py4macro.github.io" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/5b_Growth_Accounting.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>成長会計</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">はじめに</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">成長率について</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">平均成長率の計算</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">蓄積生産要素の成長率</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">全要素生産性</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">全要素生産性と蓄積生産要素の貢献度</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">方法１</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">方法２</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">表の作成</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">日本</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="chap-5b-accounting">
<span id="id1"></span><h1>成長会計<a class="headerlink" href="#chap-5b-accounting" title="Link to this heading">#</a></h1>
<div name="html-admonition" style="font-size: 0.8em">
<input type="button" onclick="location.href='https://translate.google.com/translate?hl=&sl=ja&tl=en&u='+window.location;" value="Google translation" style="color:#ffffff;background-color:#008080; height:25px" onmouseover="this.style.background='#99ccff'" onmouseout="this.style.background='#008080'"/> in English or the language of your choice.
</div><br><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">japanize_matplotlib</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">py4macro</span>

<span class="c1"># numpy v1の表示を使用</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">legacy</span><span class="o">=</span><span class="s1">&#39;1.25&#39;</span><span class="p">)</span>
<span class="c1"># 警告メッセージを非表示</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="id2">
<h2>はじめに<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<p>この章では次の問を考える。</p>
<blockquote>
<div><p>（問２）なぜ国々の経済成長率は大きく異なるのか？</p>
</div></blockquote>
<p>この問を<strong>成長会計</strong>と呼ばれる手法を使って考察する。この手法も発展会計と同様に，一人当たりGDPの<strong>変化率</strong>（即ち、経済成長率）を全要素生産性と蓄積生産要素に分解し、それぞれの寄与度を考察することにより問２の「なぜ」を考える。</p>
</section>
<section id="id3">
<h2>成長率について<a class="headerlink" href="#id3" title="Link to this heading">#</a></h2>
<p><span class="math notranslate nohighlight">\(t\)</span>時点の生産関数を</p>
<div class="math notranslate nohighlight">
\[
y_t=A_tk_t^a\left(h_tH_t\right)^{1-a}
\]</div>
<p>としよう。<span class="math notranslate nohighlight">\(t\)</span>時点と<span class="math notranslate nohighlight">\(t+1\)</span>時点の生産関数を使うと</p>
<div class="math notranslate nohighlight">
\[
\frac{y_{t+1}}{y_t}=\frac{A_{t+1}}{A_t}
\left(\frac{k_{t+1}}{k_t}\right)^a
\left(\frac{h_{t+1}H_{t+1}}{h_tH_t}\right)^{1-a}
\]</div>
<p>となる。ここで</p>
<div class="math notranslate nohighlight">
\[
1+g_x\equiv\frac{x_{t+1}}{x_t}
\]</div>
<p>とすると，<span class="math notranslate nohighlight">\(g_x\)</span>は<span class="math notranslate nohighlight">\(x\)</span>の成長率（例えば、0.02）である。これにより、</p>
<div class="math notranslate nohighlight">
\[
    1+g_y=(1+g_A)(1+g_k)^a\left[(1+g_h)(1+g_H)\right]^{1-a}
\]</div>
<p>となり、対数化すると</p>
<div class="math notranslate nohighlight">
\[
    \log(1+g_y)=\log(1+g_A)+a\log(1+g_k)+(1-a)\left[\log(1+g_h)+\log(1+g_H)\right]
\]</div>
<p>となる。また成長率が十分に小さい場合（例えば、0.02）、次式で近似することが可能となる。</p>
<div class="math notranslate nohighlight" id="equation-eq-gx-approx">
<span class="eqno">(10)<a class="headerlink" href="#equation-eq-gx-approx" title="Link to this equation">#</a></span>\[
\log(1+g_x)\approx g_x
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mf">0.02</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.01980262729617973
</pre></div>
</div>
</div>
</div>
<p>即ち、</p>
<div class="math notranslate nohighlight" id="equation-eq-5-growth-of-y">
<span class="eqno">(11)<a class="headerlink" href="#equation-eq-5-growth-of-y" title="Link to this equation">#</a></span>\[
    g_y=g_A+ag_k+(1-a)(g_h+g_H)
\]</div>
<p>となる。</p>
<p>この式に基づき，成長会計，即ち，どの要素がどれだけ一人当たりGDPの成長率に貢献しているかを計算することになる。</p>
<p>次に変数の平均成長率の計算方法を説明する。ある変数<span class="math notranslate nohighlight">\(x\)</span>が毎年<span class="math notranslate nohighlight">\(g_x\)</span>の率（例えば，<code class="docutils literal notranslate"><span class="pre">0.02</span></code>）で<span class="math notranslate nohighlight">\(n\)</span>年間成長したとしよう。初期の<span class="math notranslate nohighlight">\(x=x_0\)</span>に対する<span class="math notranslate nohighlight">\(n\)</span>年後の比率を考えると，次式が成立する。</p>
<div class="math notranslate nohighlight" id="equation-eq-5-growth-average-expanded">
<span class="eqno">(12)<a class="headerlink" href="#equation-eq-5-growth-average-expanded" title="Link to this equation">#</a></span>\[
\frac{x_{n}}{x_{0}}=
\frac{x_1}{x_{0}}\cdot
\frac{x_2}{x_{1}}\cdot
\frac{x_3}{x_{2}}\cdot
\cdots
\frac{x_{n-2}}{x_{n-3}}\cdot
\frac{x_{n-1}}{x_{n-2}}\cdot
\frac{x_n}{x_{n-1}}
=(1+g_x)^{n}
\]</div>
<p><span class="math notranslate nohighlight">\(g_x\)</span>は一定なので<span class="math notranslate nohighlight">\(g_x\)</span>は年間平均成長率と等しい。このことを踏まえ<a class="reference internal" href="#equation-eq-5-growth-average-expanded">(12)</a>の両辺を<span class="math notranslate nohighlight">\(1/n\)</span>乗すると次式となる。</p>
<div class="math notranslate nohighlight">
\[
\left(\frac{x_n}{x_0}\right)^{\frac{1}{n}}=1+g_x
\]</div>
<p>即ち，<span class="math notranslate nohighlight">\(1+g_x\)</span>は<span class="math notranslate nohighlight">\(\dfrac{x_n}{x_0}\)</span>の幾何平均であり，平均成長率<span class="math notranslate nohighlight">\(g_x\)</span>はこの式を使い計算できる。</p>
<div class="math notranslate nohighlight" id="equation-eq-5-growth-average">
<span class="eqno">(13)<a class="headerlink" href="#equation-eq-5-growth-average" title="Link to this equation">#</a></span>\[
g_x=
\left(
\dfrac{x_{n}}{x_{0}}
\right)^{\frac{1}{n}}-1
\]</div>
<p>この場合，算術平均ではなく<strong>幾何平均</strong>を使うことに注意しよう。また<strong>毎期毎期の成長率が違っても同じ結果<a class="reference internal" href="#equation-eq-5-growth-average">(13)</a>が成立する</strong>ことも覚えておこう。</p>
<p>更に，年間平均成長率を計算する場合，<a class="reference internal" href="#equation-eq-5-growth-average-expanded">(12)</a>の両辺を対数化し式<a class="reference internal" href="#equation-eq-gx-approx">(10)</a>の近似を使うこともできる。</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\ln\left(\frac{x_n}{x_0}\right)
&amp;=\ln\left(1+g_x\right)^n \\
&amp;\Downarrow
\end{align*}
\end{split}\]</div>
<div class="math notranslate nohighlight" id="equation-eq-5-growth-average-2">
<span class="eqno">(14)<a class="headerlink" href="#equation-eq-5-growth-average-2" title="Link to this equation">#</a></span>\[
g_x\approx\frac{1}{n}\ln\left(\frac{x_n}{x_0}\right)
\]</div>
<p><span class="math notranslate nohighlight">\(g_x\)</span>が十分に小さい場合は，<a class="reference internal" href="#equation-eq-5-growth-average">(13)</a>と<a class="reference internal" href="#equation-eq-5-growth-average-2">(14)</a>のどちらを使っても大きな差は出ない。重要な点は，どちらかの一つの方法を計算の対象全てに一貫して使うことであり，以下では<a class="reference internal" href="#equation-eq-5-growth-of-y">(11)</a>と<a class="reference internal" href="#equation-eq-5-growth-average-2">(14)</a>を使って計算する。</p>
<p>例：<span class="math notranslate nohighlight">\(x_0=10\)</span>，<span class="math notranslate nohighlight">\(x_n=30\)</span>，<span class="math notranslate nohighlight">\(n=50\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x0</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">xn</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">n</span>  <span class="o">=</span> <span class="mi">50</span>

<span class="n">houhou1</span> <span class="o">=</span> <span class="p">(</span><span class="n">xn</span><span class="o">/</span><span class="n">x0</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
<span class="n">houhou2</span> <span class="o">=</span> <span class="p">(</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">xn</span><span class="p">)</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x0</span><span class="p">)</span> <span class="p">)</span><span class="o">/</span><span class="n">n</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;方法１：</span><span class="si">{</span><span class="n">houhou1</span><span class="si">:}</span><span class="se">\n</span><span class="s1">方法２：</span><span class="si">{</span><span class="n">houhou2</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>方法１：0.022215413278477092
方法２：0.02197224577336219
</pre></div>
</div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">コードの説明</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f</span></code>は以前説明した<code class="docutils literal notranslate"><span class="pre">f-string</span></code>である。<code class="docutils literal notranslate"><span class="pre">houhou1</span></code>と<code class="docutils literal notranslate"><span class="pre">houhou2</span></code>にそれぞれの値を代入している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\n</span></code>は改行を意味する。</p></li>
</ul>
</div>
</section>
<section id="id4">
<h2>平均成長率の計算<a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<p>まずPenn World Tableを読み込み，国のリストを作成しよう</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">py4macro</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="s1">&#39;pwt&#39;</span><span class="p">)</span>
<span class="n">country_list</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>データに含まれる次の変数を使う。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rgdpna</span></code>：実質GDP</p>
<ul>
<li><p>経済成長を考える上で適している</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">emp</span></code>：雇用者数</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rkna</span></code>：物的資本サービス</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hc</span></code>：人的資本の指標</p>
<ul>
<li><p>教育年数と教育の収益から計算されている</p></li>
</ul>
</li>
</ul>
<p>以下で計算する変数とは次のように対応している。</p>
<ul class="simple">
<li><p>一人当たりGDP：<span class="math notranslate nohighlight">\(y_i\equiv\dfrac{Y_i}{L_i}=\)</span> <code class="docutils literal notranslate"><span class="pre">rgdpna</span></code>/<code class="docutils literal notranslate"><span class="pre">emp</span></code></p></li>
<li><p>一人当たり資本：<span class="math notranslate nohighlight">\(k_i\equiv\dfrac{K_i}{L_i}=\)</span> <code class="docutils literal notranslate"><span class="pre">rkna</span></code>/<code class="docutils literal notranslate"><span class="pre">emp</span></code></p></li>
<li><p>労働者一人当たり人的資本サービス：<span class="math notranslate nohighlight">\(h_iH_i=\)</span> <code class="docutils literal notranslate"><span class="pre">avh</span></code>x<code class="docutils literal notranslate"><span class="pre">hc</span></code></p></li>
<li><p>資本の所得シャア：<span class="math notranslate nohighlight">\(\alpha=1/3\)</span>（仮定）</p></li>
<li><p>蓄積生産要素：<span class="math notranslate nohighlight">\(k_i^{\alpha}\left(h_iH_i\right)^{1-\alpha}\)</span></p></li>
<li><p>全要素生産性：<span class="math notranslate nohighlight">\(A_i=\dfrac{y_i}{k_i^{\alpha}\left(h_iH_i\right)^{1-\alpha}}\)</span></p></li>
</ul>
<p>それぞれの変数を計算しよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 資本の所得シャア</span>
<span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mf">3.0</span>

<span class="c1"># 一人当たりGDP</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;gdppc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;rgdpna&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;emp&#39;</span><span class="p">]</span>

<span class="c1"># 資本割合</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;kpc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;rkna&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;emp&#39;</span><span class="p">]</span>

<span class="c1"># 蓄積生産要素</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;factors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;kpc&#39;</span><span class="p">]</span><span class="o">**</span><span class="n">a</span> <span class="o">*</span> <span class="p">(</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;avh&#39;</span><span class="p">]</span><span class="o">*</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;hc&#39;</span><span class="p">]</span> <span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">a</span><span class="p">)</span>

<span class="c1"># 全要素生産性</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;tfp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;gdppc&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;factors&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>これらの変数を使い，1999年から2019年の20年間の<code class="docutils literal notranslate"><span class="pre">rgdp_pc</span></code>、<code class="docutils literal notranslate"><span class="pre">k_pc</span></code>、<code class="docutils literal notranslate"><span class="pre">avh</span></code>，<code class="docutils literal notranslate"><span class="pre">hc</span></code>の平均成長率を計算するが，まずそのための準備として関数を作成する。次の<code class="docutils literal notranslate"><span class="pre">calculate_growth</span></code>関数は，<code class="docutils literal notranslate"><span class="pre">country</span></code>（国）の<code class="docutils literal notranslate"><span class="pre">var</span></code>（変数）の平均成長率を返す。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calculate_growth</span><span class="p">(</span><span class="n">country</span><span class="p">,</span> <span class="n">var</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    引数：</span>
<span class="sd">        country: 国名（文字列; 例えば，&#39;Japan&#39;）</span>
<span class="sd">        var: 変数名（文字列; 例えば，`gdppc`）</span>
<span class="sd">    戻り値：</span>
<span class="sd">        `country`における`var`の平均成長率（浮動小数点型）</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">start</span> <span class="o">=</span> <span class="mi">1999</span>        <span class="c1">#1</span>
    <span class="n">end</span> <span class="o">=</span> <span class="mi">2019</span>          <span class="c1">#2</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">end</span><span class="o">-</span><span class="n">start</span>       <span class="c1">#3</span>

    <span class="n">cond1</span> <span class="o">=</span> <span class="p">(</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">country</span> <span class="p">)</span> <span class="c1">#4</span>
    <span class="n">cond2</span> <span class="o">=</span> <span class="p">(</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">start</span> <span class="p">)</span>      <span class="c1">#5</span>
    <span class="n">cond3</span> <span class="o">=</span> <span class="p">(</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">end</span> <span class="p">)</span>        <span class="c1">#6</span>

    <span class="n">cond_start</span> <span class="o">=</span> <span class="p">(</span> <span class="n">cond1</span> <span class="o">&amp;</span> <span class="n">cond2</span> <span class="p">)</span>           <span class="c1">#7</span>
    <span class="n">cond_end</span> <span class="o">=</span> <span class="p">(</span> <span class="n">cond1</span> <span class="o">&amp;</span> <span class="n">cond3</span> <span class="p">)</span>             <span class="c1">#8</span>

    <span class="n">df_start</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cond_start</span><span class="p">,:]</span>   <span class="c1">#9</span>
    <span class="n">df_end</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cond_end</span><span class="p">,:]</span>       <span class="c1">#10</span>

    <span class="n">g</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">t</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span> <span class="n">df_end</span><span class="p">[</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">df_start</span><span class="p">[</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="c1">#11</span>
    
    <span class="k">return</span> <span class="mi">100</span><span class="o">*</span><span class="n">g</span>   <span class="c1">#12</span>
</pre></div>
</div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">コードの説明</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>：最初の年を指定</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>：最後の年を指定</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>：何年間かを計算</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4</span></code>：国を選択する際の条件であり<code class="docutils literal notranslate"><span class="pre">#7</span></code>と<code class="docutils literal notranslate"><span class="pre">#8</span></code>で使う</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#5</span></code>：最初の年を選択する際の条件であり<code class="docutils literal notranslate"><span class="pre">#7</span></code>で使う</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#6</span></code>：最後の年を選択する際の条件であり``#8`で使う</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#7</span></code>：最初の年と国を選択する際の条件であり<code class="docutils literal notranslate"><span class="pre">#9</span></code>で<code class="docutils literal notranslate"><span class="pre">df_start</span></code>を作成する際に使う</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#8</span></code>：最後の年と国を選択する際の条件であり<code class="docutils literal notranslate"><span class="pre">#10</span></code>で<code class="docutils literal notranslate"><span class="pre">df_end</span></code>を作成する際に使う</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#9</span></code>：最初の年の<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>を抽出</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#10</span></code>：最後の年の<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>を抽出</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#11</span></code>：平均成長率を計算する。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">df_end[v]</span></code>と<code class="docutils literal notranslate"><span class="pre">df_start[v]</span></code>は列ラベル<code class="docutils literal notranslate"><span class="pre">v</span></code>の列を抽出しており、<code class="docutils literal notranslate"><span class="pre">Series</span></code>として返される。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.iat[0]</span></code>は<code class="docutils literal notranslate"><span class="pre">Series</span></code>の<code class="docutils literal notranslate"><span class="pre">0</span></code>番目の数値を取り出すメソッド</p></li>
<li><p>成長率を計算し<code class="docutils literal notranslate"><span class="pre">g</span></code>に割り当てる。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">#12</span></code>：％表示にして返す</p></li>
</ul>
</div>
<p>例として，日本の一人当たりGDPの平均成長率を計算してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">calculate_growth</span><span class="p">(</span><span class="s1">&#39;Japan&#39;</span><span class="p">,</span><span class="s1">&#39;gdppc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.6242925604611884
</pre></div>
</div>
</div>
</div>
<p>次に，<code class="docutils literal notranslate"><span class="pre">calculate_growth</span></code>関数を使いいっきに全ての国の４つの変数の平均成長率を計算する。<code class="docutils literal notranslate"><span class="pre">for</span></code>ループが二重（入れ子）になっている。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gdppc&#39;</span><span class="p">,</span><span class="s1">&#39;kpc&#39;</span><span class="p">,</span><span class="s1">&#39;avh&#39;</span><span class="p">,</span><span class="s1">&#39;hc&#39;</span><span class="p">]</span>   <span class="c1">#1</span>

<span class="n">growth_dict</span> <span class="o">=</span> <span class="p">{}</span>            <span class="c1">#2</span>

<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">var_list</span><span class="p">:</span>          <span class="c1">#3</span>
    
    <span class="n">growth_list</span> <span class="o">=</span> <span class="p">[]</span>        <span class="c1">#4</span>
    
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">country_list</span><span class="p">:</span>  <span class="c1">#5</span>
        
        <span class="n">g</span> <span class="o">=</span> <span class="n">calculate_growth</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>  <span class="c1">#6</span>
        
        <span class="n">growth_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>       <span class="c1">#7</span>
            
    <span class="n">growth_dict</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">growth_list</span>    <span class="c1">#8</span>

<span class="n">df_growth</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;country&#39;</span><span class="p">:</span><span class="n">country_list</span><span class="p">,</span>         <span class="c1">#9</span>
                          <span class="s1">&#39;gdppc&#39;</span><span class="p">:</span><span class="n">growth_dict</span><span class="p">[</span><span class="s1">&#39;gdppc&#39;</span><span class="p">],</span>   <span class="c1">#10</span>
                          <span class="s1">&#39;kpc&#39;</span><span class="p">:</span><span class="n">growth_dict</span><span class="p">[</span><span class="s1">&#39;kpc&#39;</span><span class="p">],</span>
                          <span class="s1">&#39;avh&#39;</span><span class="p">:</span><span class="n">growth_dict</span><span class="p">[</span><span class="s1">&#39;avh&#39;</span><span class="p">],</span>
                          <span class="s1">&#39;hc&#39;</span><span class="p">:</span><span class="n">growth_dict</span><span class="p">[</span><span class="s1">&#39;hc&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">コードの説明</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#1</span></code>：成長率を計算する対象となる変数リスト</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#2</span></code>：空の辞書。次の形になるように(1)の平均成長率のリストを格納する。</p>
<ul>
<li><p>キー：変数名（<code class="docutils literal notranslate"><span class="pre">gdppc</span></code>、<code class="docutils literal notranslate"><span class="pre">kpc</span></code>、<code class="docutils literal notranslate"><span class="pre">hc</span></code>）</p></li>
<li><p>値：それぞれの国の成長率からなるリスト</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>：<code class="docutils literal notranslate"><span class="pre">var_list</span></code>に対しての<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ。１回目のループでは<code class="docutils literal notranslate"><span class="pre">dgppc</span></code>について計算する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#4</span></code>：空リスト（役割は以下で説明）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#5</span></code>：<code class="docutils literal notranslate"><span class="pre">country_list</span></code>に対しての<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ。(3)の１回目の<code class="docutils literal notranslate"><span class="pre">for</span></code>ループで変数<code class="docutils literal notranslate"><span class="pre">dgppc</span></code>に対して<code class="docutils literal notranslate"><span class="pre">country_list</span></code>にある国の成長率を下に続くコードを使って計算する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#6</span></code>：<code class="docutils literal notranslate"><span class="pre">calculate_growth</span></code>関数を使い，国<code class="docutils literal notranslate"><span class="pre">c</span></code>の変数<code class="docutils literal notranslate"><span class="pre">v</span></code>の平均成長率を計算し<code class="docutils literal notranslate"><span class="pre">g</span></code>に割り当てる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#7</span></code>：計算した成長率を(4)のリストに追加する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#8</span></code>：ループが終わると、(4)のリストを(2)の辞書に追加する。</p>
<ul>
<li><p>辞書に追加する際に変数名<code class="docutils literal notranslate"><span class="pre">v</span></code>を指定することにより、次のペアのデータが追加される</p>
<ul>
<li><p>キー：変数名（<code class="docutils literal notranslate"><span class="pre">rgdppc</span></code>、<code class="docutils literal notranslate"><span class="pre">kpc</span></code>、<code class="docutils literal notranslate"><span class="pre">hc</span></code>）</p></li>
<li><p>値：それぞれの国の成長率のリスト</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">#3</span></code>の<code class="docutils literal notranslate"><span class="pre">for</span></code>ループの次の変数に移り、3.以下で説明した作業が繰り返される。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">#9</span></code>：<code class="docutils literal notranslate"><span class="pre">country_list</span></code>を<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>の列に設定</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#10</span></code>：<code class="docutils literal notranslate"><span class="pre">gdppc</span></code>の成長率を<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>の列に設定するが，その際，<code class="docutils literal notranslate"><span class="pre">growth_dict['キー']</span></code>で<code class="docutils literal notranslate"><span class="pre">growth_dic</span></code>の<code class="docutils literal notranslate"><span class="pre">キー</span></code>にあるリストを抽出している。</p>
<ul>
<li><p>下の３行は<code class="docutils literal notranslate"><span class="pre">kpc</span></code>，<code class="docutils literal notranslate"><span class="pre">avh</span></code>，<code class="docutils literal notranslate"><span class="pre">hc</span></code>に対して同じ作業を行なっている。</p></li>
<li><p>新たに作成される<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>は変数<code class="docutils literal notranslate"><span class="pre">df_growth</span></code>に割り当てられる。</p></li>
</ul>
</li>
</ul>
</div>
<p><code class="docutils literal notranslate"><span class="pre">df_growth</span></code>の最初の５行を表示してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>gdppc</th>
      <th>kpc</th>
      <th>avh</th>
      <th>hc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Aruba</td>
      <td>-0.138284</td>
      <td>3.101398</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Angola</td>
      <td>1.929675</td>
      <td>-0.188248</td>
      <td>NaN</td>
      <td>0.732205</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Anguilla</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Albania</td>
      <td>3.525447</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.386450</td>
    </tr>
    <tr>
      <th>4</th>
      <td>United Arab Emirates</td>
      <td>-2.090208</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.335412</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>にはグループ計算用のメソッド<code class="docutils literal notranslate"><span class="pre">groupby</span></code>が備わっており，それを使うとより短いコードで<code class="docutils literal notranslate"><span class="pre">df_growth</span></code>を作成することができる。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calc_growth</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span> <span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">x</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>

<span class="n">cond1</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">1999</span> <span class="o">&lt;=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">cond2</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">2019</span> <span class="o">&gt;=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">cond</span> <span class="o">=</span> <span class="n">cond1</span> <span class="o">&amp;</span> <span class="n">cond2</span>
<span class="n">df_growth</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cond</span><span class="p">,:]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">)[[</span><span class="s1">&#39;gdppc&#39;</span><span class="p">,</span><span class="s1">&#39;kpc&#39;</span><span class="p">,</span><span class="s1">&#39;avh&#39;</span><span class="p">,</span><span class="s1">&#39;hc&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">calc_growth</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference external" href="https://py4basics.github.io/3_Pandas.html#id35">ここを参考にしよう。</a></p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">gdppc</span></code>の成長率のヒストグラムをプロットするが，ここでは<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>のメソッド<code class="docutils literal notranslate"><span class="pre">plot()</span></code>を使う。まず使用する列を選んでメソッド<code class="docutils literal notranslate"><span class="pre">plot()</span></code>の引数に<code class="docutils literal notranslate"><span class="pre">kind='hist'</span></code>を指定するだけである。<code class="docutils literal notranslate"><span class="pre">bins=20</span></code>は階級（棒）の数を指定する引数（デフォルトは<code class="docutils literal notranslate"><span class="pre">10</span></code>）と理解すれば良いだろう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;gdppc&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/858cdebfb784d2989d47370b280115c32273e8317ebe5b317c50822ec9d65182.png" src="_images/858cdebfb784d2989d47370b280115c32273e8317ebe5b317c50822ec9d65182.png" />
</div>
</div>
<p>多くの国はプラスの経済成長を遂げているが，マイナイス成長の経済も存在する。平均成長率がマイナスの国数を計算してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cond</span> <span class="o">=</span> <span class="p">(</span> <span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;gdppc&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">0</span> <span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cond</span><span class="p">,:])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>29
</pre></div>
</div>
</div>
</div>
<p>最も平均成長率が低い経済の国名を探してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth_sorted</span> <span class="o">=</span> <span class="n">df_growth</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;gdppc&#39;</span><span class="p">)</span>
<span class="n">df_growth_sorted</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>gdppc</th>
      <th>kpc</th>
      <th>avh</th>
      <th>hc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>176</th>
      <td>Venezuela (Bolivarian Republic of)</td>
      <td>-4.749982</td>
      <td>-0.583572</td>
      <td>NaN</td>
      <td>1.560305</td>
    </tr>
    <tr>
      <th>179</th>
      <td>Yemen</td>
      <td>-4.072836</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2.328553</td>
    </tr>
    <tr>
      <th>130</th>
      <td>Oman</td>
      <td>-3.330238</td>
      <td>-0.217700</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>United Arab Emirates</td>
      <td>-2.090208</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>0.335412</td>
    </tr>
    <tr>
      <th>158</th>
      <td>Syrian Arab Republic</td>
      <td>-1.849972</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.051994</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>ここで使ったメソッド<code class="docutils literal notranslate"><span class="pre">sort_values()</span></code>は，引数の列を基準に昇順に並べ替える。引数に<code class="docutils literal notranslate"><span class="pre">ascending=False</span></code>を使うと，降順に並び替えることができる。</p>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;上のヒストグラムで最も成長率が低い国は&#39;</span>
      <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">df_growth_sorted</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">である。&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>上のヒストグラムで最も成長率が低い国はVenezuela (Bolivarian Republic of)である。
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">df_growth_sorted</span></code>から分かるように，他の変数には欠損値が含まれているので<code class="docutils literal notranslate"><span class="pre">NaN</span></code>がある行は全て削除する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth</span> <span class="o">=</span> <span class="n">df_growth</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>残った国数を確認してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">df_growth</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>60
</pre></div>
</div>
</div>
</div>
</section>
<section id="id5">
<h2>蓄積生産要素の成長率<a class="headerlink" href="#id5" title="Link to this heading">#</a></h2>
<p>次に，下の式を使って蓄積生産要素の成長率を計算しよう。</p>
<div class="math notranslate nohighlight">
\[
g_{\text{factors}}=ag_k+(1-a)(g_h+g_H)
\]</div>
<p>結果を<code class="docutils literal notranslate"><span class="pre">df_growth</span></code>に追加するが，その際、<span class="math notranslate nohighlight">\(a=\dfrac{1}{3}\)</span>と仮定する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;factors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;kpc&#39;</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="p">(</span> <span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;avh&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;hc&#39;</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">factors</span></code>の成長率のヒストグラムを図示する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;factors&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/980c44a6d44b379df0f31a3e6b7786d56c73a3cb8688b6574eac434007c7f86b.png" src="_images/980c44a6d44b379df0f31a3e6b7786d56c73a3cb8688b6574eac434007c7f86b.png" />
</div>
</div>
<p>マイナスの成長率の国数を調べてみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cond</span> <span class="o">=</span> <span class="p">(</span> <span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;factors&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">0</span> <span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cond</span><span class="p">,:])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
</section>
<section id="id6">
<h2>全要素生産性<a class="headerlink" href="#id6" title="Link to this heading">#</a></h2>
<p>全要素生産性は残差として計算される。</p>
<div class="math notranslate nohighlight">
\[
g_A=g_y-g_{\text{factors}}
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;tfp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;gdppc&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;factors&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tfp</span></code>の成長率のヒストグラムを図示してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;tfp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/fd9b4042ddb67df67786662d7647644ad4585758b1c8889fafa7373eb4073b75.png" src="_images/fd9b4042ddb67df67786662d7647644ad4585758b1c8889fafa7373eb4073b75.png" />
</div>
</div>
<p>蓄積生産要素と比べると全要素生産性の成長率はよりマイナスに広がっている。TFP成長率がマイナスの国の数を確認してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cond</span> <span class="o">=</span> <span class="p">(</span> <span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;tfp&#39;</span><span class="p">]</span><span class="o">&lt;</span><span class="mi">0</span> <span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cond</span><span class="p">,:])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>13
</pre></div>
</div>
</div>
</div>
<p>蓄積要素生産性のマイナス成長率の国数と比べると10倍である。</p>
</section>
<section id="id7">
<h2>全要素生産性と蓄積生産要素の貢献度<a class="headerlink" href="#id7" title="Link to this heading">#</a></h2>
<p>全要素生産性と蓄積生産要素のどちらが成長率に貢献しているのだろうか。まず図を使って比較してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth</span><span class="p">[[</span><span class="s1">&#39;tfp&#39;</span><span class="p">,</span><span class="s1">&#39;factors&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/ca292e32492d5750b0e2b76ce8cfa7cdd76ec8aa5757b1937ec5b592ae84b122.png" src="_images/ca292e32492d5750b0e2b76ce8cfa7cdd76ec8aa5757b1937ec5b592ae84b122.png" />
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">コードの説明</p>
<ul class="simple">
<li><p>２つの列を選択することにより，同じ図に２つのヒストグラムが表示できるようになる。</p></li>
<li><p>引数<code class="docutils literal notranslate"><span class="pre">alpha</span></code>は図の透過度を指定する。0から1の間の値が指定可能で，デフォルトは1（透過なし）。</p></li>
</ul>
</div>
<p>図から次のことがわかる。蓄積生産要素の成長率は正の値になる傾向がある。即ち，殆どの経済で蓄積生産要素による経済成長が起こっているということである。一方，全要素生産性の成長率はマイナスへの広がりがあり，成長を妨げる要因になっているようである。</p>
<p>次に，一人当たりGDPの成長率に対する全要素生産性の貢献度を数量化するが，２つの方法を考えよう。</p>
<section id="id8">
<h3>方法１<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p>全要素生産性の貢献度を次の式で計算する。</p>
<div class="math notranslate nohighlight">
\[
100\times\frac{g_{A}}{g_y}
\]</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;tfp_contribution&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;tfp&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;gdppc&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>全要素生産性の貢献度が<code class="docutils literal notranslate"><span class="pre">50</span></code>％以上の国はデータセット全体の何％を占めるかを計算しよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cond</span> <span class="o">=</span> <span class="p">(</span> <span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;tfp_contribution&#39;</span><span class="p">]</span><span class="o">&gt;=</span><span class="mi">50</span> <span class="p">)</span>
<span class="mi">100</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cond</span><span class="p">,:])</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_growth</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>45.0
</pre></div>
</div>
</div>
</div>
<p>約<span class="output text_plain">45.0</span>％の国で全要素生産性がより大きな貢献をしている。</p>
</section>
<section id="id9">
<h3>方法２<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>２つ目の方法として発展会計で使った方法を考える。</p>
<div class="math notranslate nohighlight">
\[
g_{yi} = g_{Ai} + g_{\text{factors},i}
\]</div>
<p>従って、分散を計算すると</p>
<div class="math notranslate nohighlight">
\[
\text{Var}\left(g_{yi}\right)=
\text{Var}\left(g_{Ai}\right)+
\text{Var}\left(g_{\text{factors},i}\right)
+2\text{Cov}\left(g_{Ai},g_{\text{factors},i}\right)
\]</div>
<p>となり、次式を定義することができる。</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\begin{align*}
\text{全要素生産性の寄与度}&amp;=
\dfrac{
    \text{Var}\left(g_{Ai}\right)+
    \text{Cov}\left(g_{Ai},g_{\text{factors},i}\right)
    }{
    \text{Var}\left(g_{yi}\right)
    } \\
\text{生産要素の寄与度}&amp;=
\dfrac{
    \text{Var}\left(g_{\text{factors},i}\right)+
    \text{Cov}\left(g_{Ai},g_{\text{factors},i}\right)
    }{
    \text{Var}\left(g_{yi}\right)
    }    
\end{align*}
\end{split}\]</div>
<p>これらの式に従って計算してみよう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># それぞれの変数を設定</span>
<span class="n">gdppc_growth</span>   <span class="o">=</span> <span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;gdppc&#39;</span><span class="p">]</span>
<span class="n">tfp_growth</span>     <span class="o">=</span> <span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;tfp&#39;</span><span class="p">]</span>
<span class="n">factors_growth</span> <span class="o">=</span> <span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;factors&#39;</span><span class="p">]</span>

<span class="c1"># 分散・共分散の計算</span>
<span class="n">gdppc_growth_var</span>       <span class="o">=</span> <span class="n">gdppc_growth</span><span class="o">.</span><span class="n">var</span><span class="p">()</span>
<span class="n">tfp_growth_var</span>         <span class="o">=</span> <span class="n">tfp_growth</span><span class="o">.</span><span class="n">var</span><span class="p">()</span>
<span class="n">factors_growth_var</span>     <span class="o">=</span> <span class="n">factors_growth</span><span class="o">.</span><span class="n">var</span><span class="p">()</span>
<span class="n">tfp_factors_growth_cov</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cov</span><span class="p">(</span><span class="n">tfp_growth</span><span class="p">,</span> <span class="n">factors_growth</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p><code class="docutils literal notranslate"><span class="pre">tfp_factors_growth_cov</span></code>は次のコードでも計算できる。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,[</span><span class="s1">&#39;tfp&#39;</span><span class="p">,</span><span class="s1">&#39;factors&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">cov</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p><strong>全要素生産性の寄与度</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">tfp_growth_var</span> <span class="o">+</span> <span class="n">tfp_factors_growth_cov</span><span class="p">)</span> <span class="o">/</span> <span class="n">gdppc_growth_var</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.5790633151326814
</pre></div>
</div>
</div>
</div>
<p><strong>蓄積生産要素の寄与度</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">factors_growth_var</span><span class="o">+</span> <span class="n">tfp_factors_growth_cov</span><span class="p">)</span> <span class="o">/</span> <span class="n">gdppc_growth_var</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.42093668486731894
</pre></div>
</div>
</div>
</div>
<p>蓄積生産要素と全要素生産性の寄与度は概ね6対4の割合でであることが確認できる。この結果は両変数の成長率のヒストグラムからも伺える。全要素生産性の方がより幅広く変化しているようである。いずれにしろ，蓄積生産要素と全要素生産性ともに一人当たりGDPの成長に大きく貢献していることが確認できる。</p>
</section>
</section>
<section id="id10">
<h2>表の作成<a class="headerlink" href="#id10" title="Link to this heading">#</a></h2>
<p>結果を表としてまとめてみる。右端の列は方法１の結果を使っている。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">country_table</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Japan&#39;</span><span class="p">,</span> <span class="s1">&#39;United Kingdom&#39;</span><span class="p">,</span><span class="s1">&#39;United States&#39;</span><span class="p">,</span> <span class="s1">&#39;Norway&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Singapore&#39;</span><span class="p">,</span><span class="s1">&#39;Peru&#39;</span><span class="p">,</span><span class="s1">&#39;India&#39;</span><span class="p">,</span><span class="s1">&#39;China&#39;</span><span class="p">]</span>

<span class="n">cond</span> <span class="o">=</span> <span class="n">df_growth</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">country_table</span><span class="p">)</span>

<span class="n">col</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">,</span><span class="s1">&#39;gdppc&#39;</span><span class="p">,</span><span class="s1">&#39;factors&#39;</span><span class="p">,</span><span class="s1">&#39;tfp&#39;</span><span class="p">,</span><span class="s1">&#39;tfp_contribution&#39;</span><span class="p">]</span>

<span class="n">df_growth</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cond</span><span class="p">,</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">)</span> \
         <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;gdppc&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> \
         <span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> \
         <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;gdppc&#39;</span><span class="p">:</span><span class="s1">&#39;一人当たりGDPの成長率&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;factors&#39;</span><span class="p">:</span><span class="s1">&#39;蓄積生産要素の成長率&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;tfp&#39;</span><span class="p">:</span><span class="s1">&#39;全要素生産性の成長率&#39;</span><span class="p">,</span>
                          <span class="s1">&#39;tfp_contribution&#39;</span><span class="p">:</span><span class="s1">&#39;全要素生産性の寄与度(％)&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>一人当たりGDPの成長率</th>
      <th>蓄積生産要素の成長率</th>
      <th>全要素生産性の成長率</th>
      <th>全要素生産性の寄与度(％)</th>
    </tr>
    <tr>
      <th>country</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>China</th>
      <td>6.07</td>
      <td>4.24</td>
      <td>1.83</td>
      <td>30.08</td>
    </tr>
    <tr>
      <th>India</th>
      <td>5.17</td>
      <td>3.05</td>
      <td>2.12</td>
      <td>40.96</td>
    </tr>
    <tr>
      <th>Peru</th>
      <td>2.42</td>
      <td>1.45</td>
      <td>0.97</td>
      <td>40.16</td>
    </tr>
    <tr>
      <th>Singapore</th>
      <td>1.72</td>
      <td>2.06</td>
      <td>-0.34</td>
      <td>-19.85</td>
    </tr>
    <tr>
      <th>United States</th>
      <td>1.34</td>
      <td>0.64</td>
      <td>0.70</td>
      <td>52.08</td>
    </tr>
    <tr>
      <th>United Kingdom</th>
      <td>0.77</td>
      <td>0.61</td>
      <td>0.16</td>
      <td>21.29</td>
    </tr>
    <tr>
      <th>Japan</th>
      <td>0.62</td>
      <td>0.27</td>
      <td>0.36</td>
      <td>57.12</td>
    </tr>
    <tr>
      <th>Norway</th>
      <td>0.61</td>
      <td>0.72</td>
      <td>-0.12</td>
      <td>-19.56</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>ここでの全要素生産性の寄与度は，一人当たりGDPの成長率のうち何％がTFPによるものかを示している。この表を見ると，日本の全要素生産性の寄与度は非常に大きい。このデータは1999~2019年のデータであり，それ以前ではどうだったのかを含めて，次節では年代を区切って日本の経済成長を考察してみることにする。</p>
</section>
<section id="id11">
<h2>日本<a class="headerlink" href="#id11" title="Link to this heading">#</a></h2>
<p>日本の年代別に成長率を考えてみよう。まず次の関数を作成するが，これは<code class="docutils literal notranslate"><span class="pre">calculate_growth</span></code>関数を「日本仕様」に少しだけ修正したものとなっており，中身はほとんど同じである。大きな違いは引数に<code class="docutils literal notranslate"><span class="pre">start</span></code>と<code class="docutils literal notranslate"><span class="pre">end</span></code>を加えてことである。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">jp_calculate_growth</span><span class="p">(</span><span class="n">var</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    引数：</span>
<span class="sd">        var: 変数名（文字列; 例えば，`gdppc`）</span>
<span class="sd">        start: 最初の年（整数型）</span>
<span class="sd">        end: 最後の年（整数型）</span>
<span class="sd">    戻り値：</span>
<span class="sd">        日本における`var`の平均成長率（浮動小数点型）</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">end</span><span class="o">-</span><span class="n">start</span>

    <span class="n">cond1</span> <span class="o">=</span> <span class="p">(</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;country&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Japan&#39;</span> <span class="p">)</span>
    <span class="n">cond2</span> <span class="o">=</span> <span class="p">(</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">start</span> <span class="p">)</span>
    <span class="n">cond3</span> <span class="o">=</span> <span class="p">(</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">end</span> <span class="p">)</span>

    <span class="n">cond_start</span> <span class="o">=</span> <span class="p">(</span> <span class="n">cond1</span> <span class="o">&amp;</span> <span class="n">cond2</span> <span class="p">)</span>
    <span class="n">cond_end</span> <span class="o">=</span> <span class="p">(</span> <span class="n">cond1</span> <span class="o">&amp;</span> <span class="n">cond3</span> <span class="p">)</span>

    <span class="n">df_start</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cond_start</span><span class="p">,:]</span>
    <span class="n">df_end</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cond_end</span><span class="p">,:]</span>

    <span class="n">g</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">t</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span> <span class="n">df_end</span><span class="p">[</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="n">df_start</span><span class="p">[</span><span class="n">var</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
    
    <span class="k">return</span> <span class="mi">100</span><span class="o">*</span><span class="n">g</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">jp_calculate_growth</span></code>関数を使い<code class="docutils literal notranslate"><span class="pre">start</span></code>から<code class="docutils literal notranslate"><span class="pre">end</span></code>まで4つ変数の平均成長率を計算する関数を作成する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">jp_growth_decomposition</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;引数：</span>
<span class="sd">        start（int）: 開始年</span>
<span class="sd">        end（int）: 最終年</span>
<span class="sd">        </span>
<span class="sd">       返り値：次の変数の成長率とTFPの寄与度からなるリスト</span>
<span class="sd">                一人当たりGDP</span>
<span class="sd">                一人当たり物的資本</span>
<span class="sd">                平均労働時間</span>
<span class="sd">                人的資本</span>
<span class="sd">                全要素生産性（TFP）&quot;&quot;&quot;</span>

    <span class="n">var_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gdppc&#39;</span><span class="p">,</span><span class="s1">&#39;kpc&#39;</span><span class="p">,</span><span class="s1">&#39;avh&#39;</span><span class="p">,</span><span class="s1">&#39;hc&#39;</span><span class="p">]</span>
        
    <span class="n">g_list</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="c1"># ========== var_listの変数の平均成長率を計算しg_listに追加する ==========</span>
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">var_list</span><span class="p">:</span>
        
        <span class="n">g</span> <span class="o">=</span> <span class="n">jp_calculate_growth</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
        <span class="n">g_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
        
    <span class="c1"># ========== 蓄積生産要素の平均成長率を計算しg_listに追加する ==========</span>
    <span class="n">factors</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="n">g_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="p">(</span> <span class="n">g_list</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">+</span><span class="n">g_list</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span>
    <span class="n">g_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">factors</span><span class="p">)</span>
    
    <span class="c1"># ========== 全要素生産性の平均成長率を計算しg_listに追加する ==========</span>
    <span class="n">tfp</span> <span class="o">=</span> <span class="n">g_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">factors</span>
    <span class="n">g_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tfp</span><span class="p">)</span>

    <span class="c1"># ========== 全要素生産性の寄与度を計算しg_listに追加する ==========</span>
    <span class="n">tfp_contribution</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="n">tfp</span><span class="o">/</span><span class="n">g_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">g_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tfp_contribution</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">g_list</span>
</pre></div>
</div>
</div>
</div>
<p>この関数を使って<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>を作成する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dic</span> <span class="o">=</span> <span class="p">{}</span>                                          <span class="c1"># 1</span>

<span class="n">yr_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1950s&#39;</span><span class="p">,</span><span class="s1">&#39;1960s&#39;</span><span class="p">,</span><span class="s1">&#39;1970s&#39;</span><span class="p">,</span>               <span class="c1"># 2</span>
           <span class="s1">&#39;1980s&#39;</span><span class="p">,</span><span class="s1">&#39;1990s&#39;</span><span class="p">,</span><span class="s1">&#39;2000s&#39;</span><span class="p">,</span><span class="s1">&#39;2010s&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">yr</span> <span class="ow">in</span> <span class="n">yr_list</span><span class="p">:</span>                                <span class="c1"># 3</span>
    <span class="n">start</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">yr</span><span class="p">[:</span><span class="mi">4</span><span class="p">])</span>                           <span class="c1"># 4</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">start</span><span class="o">+</span><span class="mi">9</span>                                 <span class="c1"># 5</span>
    <span class="n">dic</span><span class="p">[</span><span class="n">yr</span><span class="p">]</span> <span class="o">=</span> <span class="n">jp_growth_decomposition</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">)</span>  <span class="c1"># 6</span>


<span class="n">idx</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gdppc_growth&#39;</span><span class="p">,</span><span class="s1">&#39;kpc_growth&#39;</span><span class="p">,</span>               <span class="c1"># 7</span>
       <span class="s1">&#39;avh_growth&#39;</span><span class="p">,</span><span class="s1">&#39;hc_growth&#39;</span><span class="p">,</span><span class="s1">&#39;factors_growth&#39;</span><span class="p">,</span>
       <span class="s1">&#39;tfp_growth&#39;</span><span class="p">,</span><span class="s1">&#39;tfp_contribution&#39;</span><span class="p">]</span>

<span class="n">df_jp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span>              <span class="c1"># 8</span>
<span class="n">df_jp</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1950s</th>
      <th>1960s</th>
      <th>1970s</th>
      <th>1980s</th>
      <th>1990s</th>
      <th>2000s</th>
      <th>2010s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>gdppc_growth</th>
      <td>5.655810</td>
      <td>8.226415</td>
      <td>3.756609</td>
      <td>3.573876</td>
      <td>0.900981</td>
      <td>0.219960</td>
      <td>0.307585</td>
    </tr>
    <tr>
      <th>kpc_growth</th>
      <td>NaN</td>
      <td>10.634742</td>
      <td>8.042348</td>
      <td>5.030082</td>
      <td>3.975190</td>
      <td>1.526388</td>
      <td>0.116887</td>
    </tr>
    <tr>
      <th>avh_growth</th>
      <td>0.668095</td>
      <td>-0.133169</td>
      <td>-0.340568</td>
      <td>-0.067613</td>
      <td>-1.017606</td>
      <td>-0.619595</td>
      <td>-0.564995</td>
    </tr>
    <tr>
      <th>hc_growth</th>
      <td>1.257113</td>
      <td>0.804446</td>
      <td>0.708988</td>
      <td>0.558892</td>
      <td>0.515371</td>
      <td>0.442203</td>
      <td>0.302941</td>
    </tr>
    <tr>
      <th>factors_growth</th>
      <td>NaN</td>
      <td>3.992432</td>
      <td>2.926396</td>
      <td>2.004213</td>
      <td>0.990240</td>
      <td>0.390535</td>
      <td>-0.135740</td>
    </tr>
    <tr>
      <th>tfp_growth</th>
      <td>NaN</td>
      <td>4.233982</td>
      <td>0.830212</td>
      <td>1.569663</td>
      <td>-0.089259</td>
      <td>-0.170575</td>
      <td>0.443326</td>
    </tr>
    <tr>
      <th>tfp_contribution</th>
      <td>NaN</td>
      <td>51.468135</td>
      <td>22.100051</td>
      <td>43.920461</td>
      <td>-9.906831</td>
      <td>-77.547931</td>
      <td>144.130973</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">コードの説明</p>
<p>1~6のコードは次のコードを<code class="docutils literal notranslate"><span class="pre">for</span></code>ループとして書いている。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dic</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;1950s&#39;</span><span class="p">:</span><span class="n">jp_growth_decomposition</span><span class="p">(</span><span class="mi">1950</span><span class="p">,</span><span class="mi">1959</span><span class="p">),</span>
       <span class="s1">&#39;1960s&#39;</span><span class="p">:</span><span class="n">jp_growth_decomposition</span><span class="p">(</span><span class="mi">1960</span><span class="p">,</span><span class="mi">1969</span><span class="p">),</span>
       <span class="s1">&#39;1970s&#39;</span><span class="p">:</span><span class="n">jp_growth_decomposition</span><span class="p">(</span><span class="mi">1970</span><span class="p">,</span><span class="mi">1979</span><span class="p">),</span>
       <span class="s1">&#39;1980s&#39;</span><span class="p">:</span><span class="n">jp_growth_decomposition</span><span class="p">(</span><span class="mi">1980</span><span class="p">,</span><span class="mi">1989</span><span class="p">),</span>
       <span class="s1">&#39;1990s&#39;</span><span class="p">:</span><span class="n">jp_growth_decomposition</span><span class="p">(</span><span class="mi">1990</span><span class="p">,</span><span class="mi">1999</span><span class="p">),</span>
       <span class="s1">&#39;2000s&#39;</span><span class="p">:</span><span class="n">jp_growth_decomposition</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2010</span><span class="p">),</span>
       <span class="s1">&#39;2010s&#39;</span><span class="p">:</span><span class="n">jp_growth_decomposition</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span><span class="mi">2019</span><span class="p">)}</span>

</pre></div>
</div>
<ol class="arabic simple">
<li><p>空の辞書<code class="docutils literal notranslate"><span class="pre">dic</span></code>を作成する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dic</span></code>のキーになる値のリストを作成する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">yr_list</span></code>に対しての<code class="docutils literal notranslate"><span class="pre">for</span></code>ループ。</p></li>
<li><p>関数<code class="docutils literal notranslate"><span class="pre">jp_growth_decomposition()</span></code>の引数として使用する開始年を作成する。</p>
<ul class="simple">
<li><p>右辺の<code class="docutils literal notranslate"><span class="pre">yr</span></code>は5つの文字からなる文字列であり，<code class="docutils literal notranslate"><span class="pre">yr[:4]</span></code>は最初の4文字を抽出する。それを整数に変換するために<code class="docutils literal notranslate"><span class="pre">int()</span></code>を使っている。</p></li>
<li><p>右辺の開始年を変数<code class="docutils literal notranslate"><span class="pre">start</span></code>に割り当てる。</p></li>
</ul>
</li>
<li><p>関数<code class="docutils literal notranslate"><span class="pre">jp_growth_decomposition()</span></code>の引数として使用する最終年を作成する。</p>
<ul class="simple">
<li><p>右辺では<code class="docutils literal notranslate"><span class="pre">start</span></code>の9年後を最終年としている。</p></li>
<li><p>右辺の最終年を変数<code class="docutils literal notranslate"><span class="pre">end</span></code>に割り当てる。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dic</span></code>のキー<code class="docutils literal notranslate"><span class="pre">yr</span></code>に対応する値として<code class="docutils literal notranslate"><span class="pre">jp_growth_decomposition(start,end)</span></code>の返り値を`設定する。</p></li>
<li><p>(8)で<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>を作成するが，その行ラベルに使うリストを作成する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dic</span></code>を使い<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>を作成する。</p></li>
</ol>
</div>
<p>値を確認するだけであればこのままでも良いが，棒グラフを作成するために列と行を入れ替えることにする。<code class="docutils literal notranslate"><span class="pre">df_jp</span></code>のメソッド<code class="docutils literal notranslate"><span class="pre">.transpose()</span></code>を使う。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_jp</span> <span class="o">=</span> <span class="n">df_jp</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="n">df_jp</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gdppc_growth</th>
      <th>kpc_growth</th>
      <th>avh_growth</th>
      <th>hc_growth</th>
      <th>factors_growth</th>
      <th>tfp_growth</th>
      <th>tfp_contribution</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1950s</th>
      <td>5.655810</td>
      <td>NaN</td>
      <td>0.668095</td>
      <td>1.257113</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1960s</th>
      <td>8.226415</td>
      <td>10.634742</td>
      <td>-0.133169</td>
      <td>0.804446</td>
      <td>3.992432</td>
      <td>4.233982</td>
      <td>51.468135</td>
    </tr>
    <tr>
      <th>1970s</th>
      <td>3.756609</td>
      <td>8.042348</td>
      <td>-0.340568</td>
      <td>0.708988</td>
      <td>2.926396</td>
      <td>0.830212</td>
      <td>22.100051</td>
    </tr>
    <tr>
      <th>1980s</th>
      <td>3.573876</td>
      <td>5.030082</td>
      <td>-0.067613</td>
      <td>0.558892</td>
      <td>2.004213</td>
      <td>1.569663</td>
      <td>43.920461</td>
    </tr>
    <tr>
      <th>1990s</th>
      <td>0.900981</td>
      <td>3.975190</td>
      <td>-1.017606</td>
      <td>0.515371</td>
      <td>0.990240</td>
      <td>-0.089259</td>
      <td>-9.906831</td>
    </tr>
    <tr>
      <th>2000s</th>
      <td>0.219960</td>
      <td>1.526388</td>
      <td>-0.619595</td>
      <td>0.442203</td>
      <td>0.390535</td>
      <td>-0.170575</td>
      <td>-77.547931</td>
    </tr>
    <tr>
      <th>2010s</th>
      <td>0.307585</td>
      <td>0.116887</td>
      <td>-0.564995</td>
      <td>0.302941</td>
      <td>-0.135740</td>
      <td>0.443326</td>
      <td>144.130973</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>1950年代に欠損値があるが，そのまま議論を進めよう。まず一人当たりGDP成長率<code class="docutils literal notranslate"><span class="pre">gdp_pc_growth</span></code>を棒グラフとして表示してみよう。表示したい列を選択し，引数に<code class="docutils literal notranslate"><span class="pre">kind='bar'</span></code>を選択するだけである。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_jp</span><span class="p">[</span><span class="s1">&#39;gdppc_growth&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/940430960759400f5387eead6f75abb72517bfe153d453b5b0e0b5aefa2ec3ec.png" src="_images/940430960759400f5387eead6f75abb72517bfe153d453b5b0e0b5aefa2ec3ec.png" />
</div>
</div>
<p>1960年代をピークに成長率は下降線をたどっている。</p>
<p>次にヒストグラムに異なる変数を並べて表示してみる。この場合も、表示したい変数を先に選び<code class="docutils literal notranslate"><span class="pre">kind='bar'</span></code>を指定するだけである。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_jp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f5cac7a3f112634cdc52235451b7ff6cf5fcbdc9a181b93e2a65746a24258755.png" src="_images/f5cac7a3f112634cdc52235451b7ff6cf5fcbdc9a181b93e2a65746a24258755.png" />
</div>
</div>
<p>以下では，全要素生産性と蓄積生産要素の成長率に焦点を当て議論を進めるために<code class="docutils literal notranslate"><span class="pre">dropna()</span></code>を使って1950年代のデータは削除する。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_jp</span> <span class="o">=</span> <span class="n">df_jp</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>上の棒グラフで，引数<code class="docutils literal notranslate"><span class="pre">stacked=True</span></code>を設定すると棒を積み重ねて表示することができる。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_jp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/27ba95f99674da7badac57c53b561b1ee83ab4744cc184e6500665bc74d00d3c.png" src="_images/27ba95f99674da7badac57c53b561b1ee83ab4744cc184e6500665bc74d00d3c.png" />
</div>
</div>
<p>次のグラフでは，一人当たりGDPの線グラフと一緒に表示している。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax_</span> <span class="o">=</span> <span class="n">df_jp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df_jp</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax_</span><span class="p">)</span>
<span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/016ea3197f41bda9c33158762e46c906de3f615b4e52c52d76d77cfc362349d5.png" src="_images/016ea3197f41bda9c33158762e46c906de3f615b4e52c52d76d77cfc362349d5.png" />
</div>
</div>
<p>1990年代に入ると，それ以前と比べて全要素生産性の成長率の下落が著しく，一人当たりGDPの成長率に大きく影響している。「失われた10年」の原因と主張する研究者もいる。</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="5a_Development_Accounting.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">発展会計</p>
      </div>
    </a>
    <a class="right-next"
       href="6_Regression.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">回帰分析</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">はじめに</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">成長率について</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">平均成長率の計算</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">蓄積生産要素の成長率</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">全要素生産性</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">全要素生産性と蓄積生産要素の貢献度</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">方法１</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">方法２</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">表の作成</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">日本</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By 春山 鉄源  Tetsugen HARUYAMA
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <!-- Default Statcounter code for Py4Macro https://py4macro.github.io --> <script type="text/javascript"> var sc_project=12478906; var sc_invisible=1; var sc_security="e767d225"; </script> <script type="text/javascript" src="https://www.statcounter.com/counter/counter.js" async></script> <noscript><div class="statcounter"><a title="Web Analytics" href="https://statcounter.com/" target="_blank"><img class="statcounter" src="https://c.statcounter.com/12478906/0/e767d225/1/" alt="Web Analytics"></a></div></noscript> <!-- End of Statcounter Code -->
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>